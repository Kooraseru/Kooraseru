const s=(()=>{const r={en:{name:"English",fontFamily:'"Google Sans", system-ui, -apple-system, sans-serif'},ja:{name:"日本語",fontFamily:'"Noto Sans JP", "Google Sans", system-ui, -apple-system, sans-serif'}};let l="en",c={};function u(){const t=window.location.hostname,n=t.split(".");return n.length===1||t.includes("localhost")||/^\d+\.\d+\.\d+\.\d+$/.test(t)?"en":n.length>2?n[0]:"www"}function d(){const t=u();return{jp:"ja",ja:"ja",en:"en",www:"en",root:"en"}[t]||"en"}function f(){const t=d();if(!(window.location.hostname.includes("localhost")||window.location.hostname.includes("127.0.0.1"))&&!Object.keys(r).includes(t)){const o=window.location.protocol,a=window.location.pathname,e=window.location.search,i=`${o}//kooraseru.com${a}${e}`;window.location.replace(i)}}async function g(t){try{const n=await fetch(`frontend/src/json/i18n/${t}.json`);return n.ok?await n.json():(console.warn(`Translation not found for ${t}, using default`),g("en"))}catch(n){return console.error(`Failed to load translation for ${t}:`,n),{language:"en",languageName:"English"}}}function w(t){const n=r[t];n&&(document.documentElement.style.setProperty("--font-family-lang",n.fontFamily),document.body.style.fontFamily=n.fontFamily)}function L(t){document.documentElement.lang=t}async function A(){try{f();const t=d(),n=await g(t);return w(t),L(t),l=t,c=n,window.currentLanguage=t,window.translations=n,n}catch(t){return console.error("Failed to initialize language system:",t),{language:"en"}}}function m(t,n=t){const o=window.translations||c;if(!o)return n;const a=t.split(".");let e=o;for(const i of a)if(typeof e=="object"&&e!==null&&i in e)e=e[i];else return n;return typeof e=="string"?e:n}function y(){document.querySelectorAll("[data-i18n]").forEach(t=>{const n=t,o=n.dataset.i18n;if(!o)return;const a=m(o);if(n.tagName==="IMG"||n.tagName==="INPUT"){const e=n.dataset.i18nAttr||"alt";n.setAttribute(e,a)}else n.textContent=a})}return{init:A,t:m,updatePageContent:y,getCurrentLanguage:()=>l||"en",getSubdomain:u}})();document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>s.init().then(()=>s.updatePageContent())):s.init().then(()=>s.updatePageContent());window.LanguageSystem=s;
//# sourceMappingURL=language-system.js.map
